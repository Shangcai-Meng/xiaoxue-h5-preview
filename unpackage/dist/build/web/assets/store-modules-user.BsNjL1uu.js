import{a1 as e,ae as s,af as a,ag as t,ah as n,Z as r,ai as o,a2 as u,a3 as i,a4 as f}from"./index-BS2xl3NC.js";const I=e("user",{state:()=>({token:s(),userInfo:null}),getters:{isLogin:e=>!!e.token,username:e=>{var s;return(null==(s=e.userInfo)?void 0:s.username)||""},avatar:e=>{var s;return(null==(s=e.userInfo)?void 0:s.avatar)||""}},actions:{async login(e){const s=await a(e),{token:n}=s.data;return this.token=n,t(n),s},async getUserInfo(){const e=await n();return this.userInfo=e.data,e},async updateUserProfile(e){const s=await r(e);return 1===s.code&&(this.userInfo={...this.userInfo,...e}),s},logout(){this.token="",this.userInfo=null,o()}},persist:{key:"user-store",storage:{setItem(e,s){u(e,s)},getItem:e=>i(e),removeItem(e){f(e)}},paths:["token","userInfo"]}});export{I as useUserStore};
